jQuery((function(a){a("head").append("<style>.merchant-logo img, img.merchant-logo { max-height: 30px !important; width: auto; }</style>");let s=!1;function e(){let a=[{display_name:"Plugin",variable_name:"plugin",value:"woo-paystack"}];return wc_paystack_params.meta_order_id&&a.push({display_name:"Order ID",variable_name:"order_id",value:wc_paystack_params.meta_order_id}),wc_paystack_params.meta_name&&a.push({display_name:"Customer Name",variable_name:"customer_name",value:wc_paystack_params.meta_name}),wc_paystack_params.meta_email&&a.push({display_name:"Customer Email",variable_name:"customer_email",value:wc_paystack_params.meta_email}),wc_paystack_params.meta_phone&&a.push({display_name:"Customer Phone",variable_name:"customer_phone",value:wc_paystack_params.meta_phone}),wc_paystack_params.meta_billing_address&&a.push({display_name:"Billing Address",variable_name:"billing_address",value:wc_paystack_params.meta_billing_address}),wc_paystack_params.meta_shipping_address&&a.push({display_name:"Shipping Address",variable_name:"shipping_address",value:wc_paystack_params.meta_shipping_address}),wc_paystack_params.meta_products&&a.push({display_name:"Products",variable_name:"products",value:wc_paystack_params.meta_products}),a}function c(){let a={};return wc_paystack_params.card_channel&&(wc_paystack_params.banks_allowed&&(a.banks=wc_paystack_params.banks_allowed),wc_paystack_params.cards_allowed&&(a.card_brands=wc_paystack_params.cards_allowed)),a}function r(){let a=[];return wc_paystack_params.bank_channel&&a.push("bank"),wc_paystack_params.card_channel&&a.push("card"),wc_paystack_params.ussd_channel&&a.push("ussd"),wc_paystack_params.qr_channel&&a.push("qr"),wc_paystack_params.bank_transfer_channel&&a.push("bank_transfer"),a}function t(){if(a("#wc-paystack-form").hide(),s)return s=!1,!0;let t=a("form#payment-form, form#order_review"),_="",n="",p="";t.find("input.paystack_txnref").val(""),wc_paystack_params.subaccount_code&&(_=wc_paystack_params.subaccount_code),wc_paystack_params.charges_account&&(n=wc_paystack_params.charges_account),wc_paystack_params.transaction_charges&&(p=Number(wc_paystack_params.transaction_charges));let m=Number(wc_paystack_params.amount);const o={key:wc_paystack_params.key,email:wc_paystack_params.email,amount:m,reference:wc_paystack_params.txnref,currency:wc_paystack_params.currency,subaccount:_,bearer:n,transaction_charge:p,metadata:{custom_fields:e()},onSuccess:function(e){t.append('<input type="hidden" class="paystack_txnref" name="paystack_txnref" value="'+e.reference+'"/>'),s=!0,t.submit(),a("body").block({message:null,overlayCSS:{background:"#fff",opacity:.6},css:{cursor:"wait"}})},onCancel:()=>{a("#wc-paystack-form").show(),a(this.el).unblock()}};Array.isArray(r())&&r().length&&(o.channels=r(),a.isEmptyObject(c())||(o.metadata.custom_filters=c()));try{(new PaystackPop).checkout(o).then((function(a){console.log("Transaction:",a)})).catch((function(a){console.error("Paystack checkout error:",a)}))}catch(a){console.error("Paystack checkout error:",a)}}a("#wc-paystack-form").hide(),t(),jQuery("#paystack-payment-button").click((function(){return t()})),jQuery("#paystack_form form#order_review").submit((function(){return t()}))}));